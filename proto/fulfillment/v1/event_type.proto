//
// Copyright (c) 2025 Red Hat, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with
// the License. You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on
// an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the
// specific language governing permissions and limitations under the License.
//

syntax = "proto3";

package fulfillment.v1;

import "google/protobuf/any.proto";

enum EventType {
  // Unspecified indicates that the type of event hasn't been specified.
  EVENT_TYPE_UNSPECIFIED = 0;

  // Create indicates that a new object has been created. The `new` field will contain the represenation of that
  // object. The `old` field will be empty.
  EVENT_TYPE_CREATE = 1;

  // Update indicates that an existing object has been updated. The `old` and `new` fields will contain the
  // representations of the object before and after the update.
  EVENT_TYPE_UPDATE = 2;

  // Delete indicates that an object has been deleted. The `old` field will contain the representation of the object
  // right before it was deleted. The `new` field will be empty.
  EVENT_TYPE_DELETE = 3;
}

// Events are generated by the system when objects are created, updated or deleted.
message Event {
  // Unique identifier of the event. This will be automatically generated by the system when the event is generated.
  //
  // The only guarantee about the values of these identifiers is that they are unique. Note in particular that there
  // is no guarantee of order: clients should refrain from assuming that they are ordered in any way.
  string id = 1;

  // Type of event.
  EventType type = 2;

  // Old contains the representation of the object before update or delete. It will be empty for other types of events.
  google.protobuf.Any old = 3;

  // New contains the representation of the object after creation or update. It will be empty for other types of events.
  google.protobuf.Any new = 4;
}
